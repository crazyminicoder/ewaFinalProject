{"ast":null,"code":"import _toConsumableArray from \"/Users/fateenahmed/Documents/IIT/Sem3/webapps/Project-II/alacart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"/Users/fateenahmed/Documents/IIT/Sem3/webapps/Project-II/alacart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { ACTIONS } from \"./action\";\nimport { v4 as uuid } from \"uuid\";\nimport { products as allProducts } from \"./products\"; // create two new case to increase & decrease the item count in redux\n\nvar initialState = {\n  isLoggedIn: false,\n  user: {\n    id: \"\",\n    userName: \"\",\n    email: \"\",\n    password: \"\"\n  },\n  cartItems: [],\n  products: allProducts,\n  address: {}\n};\nexport var reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ACTIONS.LOGIN:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoggedIn: true,\n        user: _objectSpread(_objectSpread({}, state.user), action.payload)\n      });\n\n    case ACTIONS.SIGNUP:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoggedIn: true,\n        user: _objectSpread(_objectSpread({\n          id: uuid()\n        }, state.user), action.payload)\n      });\n\n    case ACTIONS.LOGOUT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoggedIn: false,\n        user: {},\n        cartItems: []\n      });\n\n    case ACTIONS.ADD_TO_CART:\n      var item = state.cartItems.find(function (item) {\n        return item.id === action.payload.id;\n      });\n\n      if (item) {\n        item.item_count++;\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: [].concat(_toConsumableArray(state.cartItems), [action.payload])\n      });\n\n    case ACTIONS.INCREASE_ITEM_COUNT:\n      {\n        var updatedState = state.cartItems.map(function (item) {\n          if (action.payload.id === item.id) {\n            item.item_count++;\n          }\n\n          return item;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cartItems: updatedState\n        });\n      }\n\n    case ACTIONS.DECREASE_ITEM_COUNT:\n      {\n        var _updatedState = state.cartItems.map(function (item) {\n          if (action.payload.id === item.id) {\n            item.item_count--;\n          }\n\n          return item;\n        });\n\n        _updatedState = _updatedState.filter(function (item) {\n          return item.item_count > 0;\n        });\n        return _objectSpread(_objectSpread({}, state), {}, {\n          cartItems: _updatedState\n        });\n      }\n\n    case ACTIONS.SEARCH_PRODUCT:\n      var _action$payload$searc = action.payload.searchText,\n          searchText = _action$payload$searc === void 0 ? '' : _action$payload$searc;\n      var filteredProduct = allProducts.filter(function (_ref) {\n        var productName = _ref.productName;\n        return productName.toLowerCase().includes(searchText.toLowerCase());\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        products: filteredProduct\n      });\n\n    case ACTIONS.ADD_ADDRESS:\n      console.log(\"reducer\", action.payload);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        address: action.payload\n      });\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ACTIONS","v4","uuid","products","allProducts","initialState","isLoggedIn","user","id","userName","email","password","cartItems","address","reducer","state","action","type","LOGIN","payload","SIGNUP","LOGOUT","ADD_TO_CART","item","find","item_count","INCREASE_ITEM_COUNT","updatedState","map","DECREASE_ITEM_COUNT","filter","SEARCH_PRODUCT","searchText","filteredProduct","productName","toLowerCase","includes","ADD_ADDRESS","console","log"],"sources":["/Users/fateenahmed/Documents/IIT/Sem3/webapps/Project-II/alacart/src/reducer.js"],"sourcesContent":["import { ACTIONS } from \"./action\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { products as allProducts } from \"./products\";\r\n\r\n// create two new case to increase & decrease the item count in redux\r\nconst initialState = {\r\n  isLoggedIn: false,\r\n  user: {\r\n    id: \"\",\r\n    userName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  },\r\n  cartItems: [],\r\n  products: allProducts,\r\n  address: {}\r\n};\r\n\r\nexport const reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ACTIONS.LOGIN:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        user: {\r\n          ...state.user,\r\n          ...action.payload\r\n        }\r\n      };\r\n    case ACTIONS.SIGNUP:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        user: {\r\n          id: uuid(),\r\n          ...state.user,\r\n          ...action.payload\r\n        }\r\n      };\r\n    case ACTIONS.LOGOUT:\r\n      return {\r\n        ...state,\r\n        isLoggedIn: false,\r\n        user: {},\r\n        cartItems: []\r\n      };\r\n    case ACTIONS.ADD_TO_CART:\r\n      const item = state.cartItems.find(\r\n        (item) => item.id === action.payload.id\r\n      );\r\n      if (item) {\r\n        item.item_count++;\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        cartItems: [...state.cartItems, action.payload]\r\n      };\r\n    case ACTIONS.INCREASE_ITEM_COUNT:{\r\n      const updatedState = state.cartItems.map((item) => {\r\n        if (action.payload.id === item.id) {\r\n          item.item_count++;\r\n        }\r\n        return item;\r\n      });\r\n\r\n     return {\r\n       ...state,\r\n       cartItems: updatedState\r\n     }\r\n\r\n    }\r\n    \r\n    case ACTIONS.DECREASE_ITEM_COUNT:{\r\n      let updatedState = state.cartItems.map((item) => {\r\n        if (action.payload.id === item.id ) {\r\n            item.item_count--\r\n        }\r\n        return item;\r\n      });\r\n\r\n      updatedState = updatedState.filter(item => \r\n        item.item_count > 0\r\n      )\r\n     return {\r\n       ...state,\r\n       cartItems: updatedState\r\n     }\r\n    }\r\n    \r\n    case ACTIONS.SEARCH_PRODUCT:\r\n      const {searchText = ''} = action.payload;\r\n      const filteredProduct = allProducts.filter(({productName}) => productName.toLowerCase().includes(searchText.toLowerCase()))\r\n      return {\r\n        ...state,\r\n        products: filteredProduct\r\n      }\r\n      case ACTIONS.ADD_ADDRESS:\r\n        console.log(\"reducer\", action.payload)\r\n        return {\r\n          ...state,\r\n          address: action.payload\r\n        }\r\n\r\n     default:\r\n      return state;\r\n  }\r\n  \r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}